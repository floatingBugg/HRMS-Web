<div class="add-employee-container container m-0 screenMaxWidth">
  <div class="row">
    <h3 class="mt-4"> Edit Employee {{editDataArray.etedFirstName}}</h3>
    <mat-vertical-stepper [formGroup]="personalDetailsForm" linear>
      <form [formGroup]="personalDetailsForm">
        <mat-step [stepControl]="personalDetailsForm.get('emsTblEmergencyContact')['controls']"
          label="Personal Details">
          <mat-label class="col-lg-6 col-md-6 ml-5"><b>User Image:</b></mat-label>
          <div *ngIf="profilePicUrl">
            <div class="row">
              <img [src]="profilePicUrl" class="Image" alt="No Image Available/Not Uploaded">
            </div>
            <div class="row">
              <input id="file" type="file" (change)="employeePicUpload($event)" />
            </div>
          </div>
          <div class="screenMaxWidth">
            <mat-form-field class="col-lg-5 col-md-5 input">
              <mat-label>Employee ID</mat-label>
              <input name="etedEmployeeId" formControlName="etedEmployeeId" readonly type="number" matInput
                placeholder="Employee ID">
            </mat-form-field>
            <mat-form-field class="col-lg-5 col-md-5 input">
              <mat-label for="etedFirstName">First Name</mat-label>
              <input formControlName="etedFirstName" id="etedFirstName" name="etedFirstName" matInput
                placeholder="First Name" maxlength="20">
              <mat-error *ngIf="personalDetailsForm.controls['etedFirstName'].errors?.['required'] ">
                First Name is <strong>required</strong></mat-error>
            </mat-form-field>
            <mat-form-field class=" col-lg-5 col-md-5 input">
              <mat-label>Last Name</mat-label>
              <input formControlName="etedLastName" name="etedLastName" maxlength="20" matInput placeholder="Last Name">
              <mat-error *ngIf="personalDetailsForm.controls['etedLastName'].errors?.['required'] ">
                Last Name is <strong>required</strong></mat-error>
            </mat-form-field>
            <mat-form-field class="col-lg-5 col-md-5input">
              <mat-label>Phone Number</mat-label>
              <input formControlName="etedContactNumber" (keypress)="onlyNumbersAllowed($event)" maxlength="11"
                name="etedContactNumber" matInput placeholder="Phone Number">
              <mat-error *ngIf="personalDetailsForm.controls['etedContactNumber'].errors?.['required'] ">
                Phone Number is <strong>required</strong></mat-error>
              <mat-error *ngIf="personalDetailsForm.controls['etedContactNumber'].errors?.['minlength'] ">
                Enter a valid phone number</mat-error>
            </mat-form-field>
            <mat-form-field class="col-lg-5 col-md-5 input">
              <mat-label>CNIC</mat-label>
              <input formControlName="etedCnic" maxlength="13" (keypress)="onlyNumbersAllowed($event)" name="etedCnic"
                matInput placeholder="CNIC">
              <mat-error *ngIf="personalDetailsForm.controls['etedCnic'].errors?.['required'] ">
                CNIC is <strong>required</strong></mat-error>
              <mat-error *ngIf="personalDetailsForm.controls['etedCnic'].errors?.['minlength'] ">
                Enter a valid CNIC</mat-error>
            </mat-form-field>
            <mat-form-field class="col-lg-5 col-md-5 input">
              <mat-label> Personal Email Address</mat-label>
              <input formControlName="etedEmailAddress" matInput name="etedEmailAddress"
                placeholder="Personal Email Address">
              <mat-error *ngIf="personalDetailsForm.controls['etedEmailAddress'].errors?.['required'] ">
                Email is <strong>required</strong></mat-error>
              <mat-error *ngIf="personalDetailsForm.controls['etedEmailAddress'].errors?.['email'] ">
                Enter a valid email</mat-error>
            </mat-form-field>
            <mat-form-field class="col-lg-5 col-md-5 input">
              <mat-label>Professional Email Address</mat-label>
              <input matInput formControlName="etedOfficialEmailAddress" name="etedOfficialEmailAddress"
                placeholder="Professional Email Address">
              <mat-error *ngIf="personalDetailsForm.controls['etedEmailAddress'].errors?.['required'] ">
                Email is <strong>required</strong></mat-error>
              <mat-error *ngIf="personalDetailsForm.controls['etedEmailAddress'].errors?.['email'] ">
                Enter a valid email</mat-error>
            </mat-form-field>
            <mat-form-field class=" col-lg-5 col-md-5 input">
              <mat-label>Address</mat-label>
              <textarea formControlName="etedAddress" name="etedAddress" matInput placeholder="Address"></textarea>
              <mat-error *ngIf="personalDetailsForm.controls['etedAddress'].errors?.['required'] ">
                Address is <strong>required</strong></mat-error>
            </mat-form-field>
            <mat-form-field class="col-lg-5 col-md-5 input">
              <mat-label>Date of Birth</mat-label>
              <input readonly formControlName="etedDob" placeholder="Date of Birth" name="etedDob" matInput
                [matDatepicker]="dob">
              <mat-datepicker-toggle matSuffix [for]="dob"></mat-datepicker-toggle>
              <mat-datepicker #dob></mat-datepicker>
              <mat-error *ngIf="personalDetailsForm.controls['etedDob'].errors?.['required'] ">
                Date of Birth is <strong>required</strong></mat-error>
            </mat-form-field>
            <mat-form-field class="col-lg-5 col-md-5 input">
              <mat-label>Gender</mat-label>
              <mat-select formControlName="etedGender" name="etedGender">
                <mat-option [value]="">-- select one --</mat-option>
                <mat-option value="female">Female</mat-option>
                <mat-option value="male">Male</mat-option>
              </mat-select>
              <mat-error *ngIf="personalDetailsForm.controls['etedGender'].errors?.['required'] ">
                Gender is <strong>required</strong></mat-error>
            </mat-form-field>
            <mat-form-field class="col-lg-5 col-md-5 input">
              <mat-label>Password</mat-label>
              <input formControlName="ethupassword" name="ethupassword" matInput placeholder="Password" maxlength="20">
              <mat-error *ngIf="personalDetailsForm.controls['ethupassword'].errors?.['required'] ">
                Password is <strong>required</strong></mat-error>
            </mat-form-field>

            <mat-form-field class="col-lg-5 col-md-5 input">
              <mat-label>Marital Status</mat-label>
              <mat-select formControlName="etedMaritalStatus" name="etedMaritalStatus">
                <mat-option [value]="">-- select one --</mat-option>
                <mat-option value="single">Single</mat-option>
                <mat-option value="married">Married</mat-option>
              </mat-select>
              <mat-error *ngIf="personalDetailsForm.controls['etedContactNumber'].errors?.['required'] ">
                Marital Status is <strong>required</strong></mat-error>
            </mat-form-field>

            <mat-form-field class="col-lg-5 col-md-5 input">
              <mat-label>Role</mat-label>
              <mat-select formControlName="etrethuroleid" name="etrethuroleid">
                <mat-option [value]=""> ---Select One---</mat-option>
                <mat-option value="1">Super Admin</mat-option>
                <mat-option value="2">Admin</mat-option>
                <mat-option value="3">Team Lead/Line Manager</mat-option>
                <mat-option value="4">Employee</mat-option>
              </mat-select>
              <mat-error *ngIf="personalDetailsForm.controls['etrethuroleid'].errors?.['required'] ">
                Role is <strong>required</strong></mat-error>
            </mat-form-field>

            <mat-form-field class="col-lg-5 col-md-5 input">
              <mat-label>Employment Status</mat-label>
              <mat-select formControlName="etedStatus" name="etedStatus" (selectionChange)="Assignleave($event)">
                <mat-option [value]="">-- select one --</mat-option>
                <mat-option value="Active">Active</mat-option>
                <mat-option value="Inactive">Inactive</mat-option>
                <mat-option value="Probation">Probation</mat-option>
                <mat-option value="Released">Released</mat-option>
                <mat-option value="Resigned">Resigned</mat-option>
              </mat-select>
              <mat-error *ngIf="personalDetailsForm.controls['etedStatus'].errors?.['required'] ">
                Employment Status is <strong>required</strong></mat-error>
            </mat-form-field>
            <mat-form-field class="col-lg-5 col-md-5 input">
              <mat-label>Blood Group</mat-label>
              <mat-select formControlName="etedBloodGroup" name="etedBloodGroup">
                <mat-option [value]="">-- select one --</mat-option>
                <mat-option value="A+">A+</mat-option>
                <mat-option value="A-">A-</mat-option>
                <mat-option value="B+">B+</mat-option>
                <mat-option value="B-">B-</mat-option>
                <mat-option value="O+">O+</mat-option>
                <mat-option value="O-">O-</mat-option>
                <mat-option value="AB+">AB+</mat-option>
                <mat-option value="AB-">AB-</mat-option>
              </mat-select>
              <mat-error *ngIf="personalDetailsForm.controls['etedBloodGroup'].errors?.['required'] ">
                Blood Group is <strong>required</strong></mat-error>
            </mat-form-field>
            <mat-form-field class="col-lg-5 col-md-5 input">
              <mat-label>Religion</mat-label>
              <mat-select formControlName="etedReligion" name="etedReligion">
                <mat-option [value]="">-- select one --</mat-option>
                <mat-option value="muslim">Muslim</mat-option>
                <mat-option value="nonmuslim">Non-Muslim</mat-option>
              </mat-select>
              <mat-error *ngIf="personalDetailsForm.controls['etedReligion'].errors?.['required'] ">
                Religion is <strong>required</strong></mat-error>
            </mat-form-field>
            <mat-form-field class="col-lg-5 col-md-5 input">
              <mat-label>Nationality</mat-label>
              <mat-select formControlName="etedNationality" name="etedNationality">
                <mat-option [value]="">-- select one --</mat-option>
                <mat-option value="afghan">Afghan</mat-option>
                <mat-option value="albanian"> Albanian</mat-option>
                <mat-option value="algerian">Algerian</mat-option>
                <mat-option value="american">American</mat-option>
                <mat-option value="andorran">Andorran</mat-option>
                <mat-option value="angolan">Angolan</mat-option>
                <mat-option value="antiguans">Antiguans</mat-option>
                <mat-option value="argentinean">Argentinean</mat-option>
                <mat-option value="armenian">Armenian</mat-option>
                <mat-option value="australian">Australian</mat-option>
                <mat-option value="austrian">Austrian</mat-option>
                <mat-option value="azerbaijani">Azerbaijani</mat-option>
                <mat-option value="bahamian">Bahamian</mat-option>
                <mat-option value="bahraini">Bahraini</mat-option>
                <mat-option value="bangladeshi">Bangladeshi</mat-option>
                <mat-option value="barbadian">Barbadian</mat-option>
                <mat-option value="barbudans">Barbudans</mat-option>
                <mat-option value="batswana">Batswana</mat-option>
                <mat-option value="belarusian">Belarusian</mat-option>
                <mat-option value="belgian">Belgian</mat-option>
                <mat-option value="belizean">Belizean</mat-option>
                <mat-option value="beninese">Beninese</mat-option>
                <mat-option value="bhutanese">Bhutanese</mat-option>
                <mat-option value="bolivian">Bolivian</mat-option>
                <mat-option value="bosnian">Bosnian</mat-option>
                <mat-option value="brazilian">Brazilian</mat-option>
                <mat-option value="british">British</mat-option>
                <mat-option value="bruneian">Bruneian</mat-option>
                <mat-option value="bulgarian">Bulgarian</mat-option>
                <mat-option value="burkinabe">Burkinabe</mat-option>
                <mat-option value="burmese">Burmese</mat-option>
                <mat-option value="burundian">Burundian</mat-option>
                <mat-option value="cambodian">Cambodian</mat-option>
                <mat-option value="cameroonian">Cameroonian</mat-option>
                <mat-option value="canadian">Canadian</mat-option>
                <mat-option value="cape verdean">Cape Verdean</mat-option>
                <mat-option value="central african">Central African</mat-option>
                <mat-option value="chadian">Chadian</mat-option>
                <mat-option value="chilean">Chilean</mat-option>
                <mat-option value="chinese">Chinese</mat-option>
                <mat-option value="colombian">Colombian</mat-option>
                <mat-option value="comoran">Comoran</mat-option>
                <mat-option value="congolese">Congolese</mat-option>
                <mat-option value="costa rican">Costa Rican</mat-option>
                <mat-option value="croatian">Croatian</mat-option>
                <mat-option value="cuban">Cuban</mat-option>
                <mat-option value="cypriot">Cypriot</mat-option>
                <mat-option value="czech">Czech</mat-option>
                <mat-option value="danish">Danish</mat-option>
                <mat-option value="djibouti">Djibouti</mat-option>
                <mat-option value="dominican">Dominican</mat-option>
                <mat-option value="dutch">Dutch</mat-option>
                <mat-option value="east timorese">East Timorese</mat-option>
                <mat-option value="ecuadorean">Ecuadorean</mat-option>
                <mat-option value="egyptian">Egyptian</mat-option>
                <mat-option value="emirian">Emirian</mat-option>
                <mat-option value="equatorial guinean">Equatorial Guinean</mat-option>
                <mat-option value="eritrean">Eritrean</mat-option>
                <mat-option value="estonian">Estonian</mat-option>
                <mat-option value="ethiopian">Ethiopian</mat-option>
                <mat-option value="fijian">Fijian</mat-option>
                <mat-option value="filipino">Filipino</mat-option>
                <mat-option value="finnish">Finnish</mat-option>
                <mat-option value="french">French</mat-option>
                <mat-option value="gabonese">Gabonese</mat-option>
                <mat-option value="gambian">Gambian</mat-option>
                <mat-option value="georgian">Georgian</mat-option>
                <mat-option value="german">German</mat-option>
                <mat-option value="ghanaian">Ghanaian</mat-option>
                <mat-option value="greek">Greek</mat-option>
                <mat-option value="grenadian">Grenadian</mat-option>
                <mat-option value="guatemalan">Guatemalan</mat-option>
                <mat-option value="guinea-bissauan">Guinea-Bissauan</mat-option>
                <mat-option value="guinean">Guinean</mat-option>
                <mat-option value="guyanese">Guyanese</mat-option>
                <mat-option value="haitian">Haitian</mat-option>
                <mat-option value="herzegovinian">Herzegovinian</mat-option>
                <mat-option value="honduran">Honduran</mat-option>
                <mat-option value="hungarian">Hungarian</mat-option>
                <mat-option value="icelander">Icelander</mat-option>
                <mat-option value="indian">Indian</mat-option>
                <mat-option value="indonesian">Indonesian</mat-option>
                <mat-option value="iranian">Iranian</mat-option>
                <mat-option value="iraqi">Iraqi</mat-option>
                <mat-option value="irish">Irish</mat-option>
                <mat-option value="israeli">Israeli</mat-option>
                <mat-option value="italian">Italian</mat-option>
                <mat-option value="ivorian">Ivorian</mat-option>
                <mat-option value="jamaican">Jamaican</mat-option>
                <mat-option value="japanese">Japanese</mat-option>
                <mat-option value="jordanian">Jordanian</mat-option>
                <mat-option value="kazakhstani">Kazakhstani</mat-option>
                <mat-option value="kenyan">Kenyan</mat-option>
                <mat-option value="kittian and nevisian">Kittian and Nevisian</mat-option>
                <mat-option value="kuwaiti">Kuwaiti</mat-option>
                <mat-option value="kyrgyz">Kyrgyz</mat-option>
                <mat-option value="laotian">Laotian</mat-option>
                <mat-option value="latvian">Latvian</mat-option>
                <mat-option value="lebanese">Lebanese</mat-option>
                <mat-option value="liberian">Liberian</mat-option>
                <mat-option value="libyan">Libyan</mat-option>
                <mat-option value="liechtensteiner">Liechtensteiner</mat-option>
                <mat-option value="lithuanian">Lithuanian</mat-option>
                <mat-option value="luxembourger">Luxembourger</mat-option>
                <mat-option value="macedonian">Macedonian</mat-option>
                <mat-option value="malagasy">Malagasy</mat-option>
                <mat-option value="malawian">Malawian</mat-option>
                <mat-option value="malaysian">Malaysian</mat-option>
                <mat-option value="maldivan">Maldivan</mat-option>
                <mat-option value="malian">Malian</mat-option>
                <mat-option value="maltese">Maltese</mat-option>
                <mat-option value="marshallese">Marshallese</mat-option>
                <mat-option value="mauritanian">Mauritanian</mat-option>
                <mat-option value="mauritian">Mauritian</mat-option>
                <mat-option value="mexican">Mexican</mat-option>
                <mat-option value="micronesian">Micronesian</mat-option>
                <mat-option value="moldovan">Moldovan</mat-option>
                <mat-option value="monacan">Monacan</mat-option>
                <mat-option value="mongolian">Mongolian</mat-option>
                <mat-option value="moroccan">Moroccan</mat-option>
                <mat-option value="mosotho">Mosotho</mat-option>
                <mat-option value="motswana">Motswana</mat-option>
                <mat-option value="mozambican">Mozambican</mat-option>
                <mat-option value="namibian">Namibian</mat-option>
                <mat-option value="nauruan">Nauruan</mat-option>
                <mat-option value="nepalese">Nepalese</mat-option>
                <mat-option value="new zealander">New Zealander</mat-option>
                <mat-option value="ni-vanuatu">Ni-Vanuatu</mat-option>
                <mat-option value="nicaraguan">Nicaraguan</mat-option>
                <mat-option value="nigerien">Nigerien</mat-option>
                <mat-option value="north korean">North Korean</mat-option>
                <mat-option value="northern irish">Northern Irish</mat-option>
                <mat-option value="norwegian">Norwegian</mat-option>
                <mat-option value="omani">Omani</mat-option>
                <mat-option value="pakistani">Pakistani</mat-option>
                <mat-option value="palauan">Palauan</mat-option>
                <mat-option value="panamanian">Panamanian</mat-option>
                <mat-option value="papua new guinean">Papua New Guinean</mat-option>
                <mat-option value="paraguayan">Paraguayan</mat-option>
                <mat-option value="peruvian">Peruvian</mat-option>
                <mat-option value="polish">Polish</mat-option>
                <mat-option value="portuguese">Portuguese</mat-option>
                <mat-option value="qatari">Qatari</mat-option>
                <mat-option value="romanian">Romanian</mat-option>
                <mat-option value="russian">Russian</mat-option>
                <mat-option value="rwandan">Rwandan</mat-option>
                <mat-option value="saint lucian">Saint Lucian</mat-option>
                <mat-option value="salvadoran">Salvadoran</mat-option>
                <mat-option value="samoan">Samoan</mat-option>
                <mat-option value="san marinese">San Marinese</mat-option>
                <mat-option value="sao tomean">Sao Tomean</mat-option>
                <mat-option value="saudi">Saudi</mat-option>
                <mat-option value="scottish">Scottish</mat-option>
                <mat-option value="senegalese">Senegalese</mat-option>
                <mat-option value="serbian">Serbian</mat-option>
                <mat-option value="seychellois">Seychellois</mat-option>
                <mat-option value="sierra leonean">Sierra Leonean</mat-option>
                <mat-option value="singaporean">Singaporean</mat-option>
                <mat-option value="slovakian">Slovakian</mat-option>
                <mat-option value="slovenian">Slovenian</mat-option>
                <mat-option value="solomon islander">Solomon Islander</mat-option>
                <mat-option value="somali">Somali</mat-option>
                <mat-option value="south african">South African</mat-option>
                <mat-option value="south korean">South Korean</mat-option>
                <mat-option value="spanish">Spanish</mat-option>
                <mat-option value="sri lankan">Sri Lankan</mat-option>
                <mat-option value="sudanese">Sudanese</mat-option>
                <mat-option value="surinamer">Surinamer</mat-option>
                <mat-option value="swazi">Swazi</mat-option>
                <mat-option value="swedish">Swedish</mat-option>
                <mat-option value="swiss">Swiss</mat-option>
                <mat-option value="syrian">Syrian</mat-option>
                <mat-option value="taiwanese">Taiwanese</mat-option>
                <mat-option value="tajik">Tajik</mat-option>
                <mat-option value="tanzanian">Tanzanian</mat-option>
                <mat-option value="thai">Thai</mat-option>
                <mat-option value="togolese">Togolese</mat-option>
                <mat-option value="tongan">Tongan</mat-option>
                <mat-option value="trinidadian or tobagonian">Trinidadian or Tobagonian</mat-option>
                <mat-option value="tunisian">Tunisian</mat-option>
                <mat-option value="turkish">Turkish</mat-option>
                <mat-option value="tuvaluan">Tuvaluan</mat-option>
                <mat-option value="ugandan">Ugandan</mat-option>
                <mat-option value="ukrainian">Ukrainian</mat-option>
                <mat-option value="uruguayan">Uruguayan</mat-option>
                <mat-option value="uzbekistani">Uzbekistani</mat-option>
                <mat-option value="venezuelan">Venezuelan</mat-option>
                <mat-option value="vietnamese">Vietnamese</mat-option>
                <mat-option value="welsh">Welsh</mat-option>
                <mat-option value="yemenite">Yemenite</mat-option>
                <mat-option value="zambian">Zambian</mat-option>
                <mat-option value="zimbabwean">Zimbabwean</mat-option>
              </mat-select>
              <mat-error *ngIf="personalDetailsForm.controls['etedNationality'].errors?.['required'] ">
                Nationality is <strong>required</strong></mat-error>
            </mat-form-field>
            <h4 class="mt-5">Emergency Contact Person</h4>
            <div formArrayName="emsTblEmergencyContact"
              *ngFor="let item of personalDetailsForm.get('emsTblEmergencyContact')['controls'];  let i = index;">
              {{setCurrentIndexEmergency(i)}}
              <div class="form-group" [formGroupName]=i>
                <p class="mb-3"><b>Emergency Contact Person: {{i+1}}</b></p>
                <mat-form-field style="display: none;" class="col-lg-5 col-md-5 input">
                  <mat-label>Emergency Contact Id</mat-label>
                  <input formControlName="etecEcId" name="etecEcId" matInput placeholder="Emergency Contact Id">
                </mat-form-field>
                <mat-form-field class="col-lg-5 col-md-5 input">
                  <mat-label>First Name</mat-label>
                  <input formControlName="etecFirstName" name="etecFirstName" matInput placeholder="First Name">
                  <mat-error *ngIf="item.controls['etecFirstName'].errors?.['required']">
                    First Name is <strong>required</strong></mat-error>
                </mat-form-field>
                <mat-form-field class="col-lg-5 col-md-5 input">
                  <mat-label>Last Name</mat-label>
                  <input formControlName="etecLastName" name="etecLastName" matInput placeholder="Last Name">
                  <mat-error *ngIf="item.controls['etecLastName'].errors?.['required']">
                    Last Name is <strong>required</strong></mat-error>
                </mat-form-field>
                <mat-form-field class="col-lg-5 col-md-5 input">
                  <mat-label>Relation with Employee</mat-label>
                  <mat-select formControlName="etecRelation" name="etecRelation">
                    <mat-option [value]="">-- select one --</mat-option>
                    <mat-option value="father">Father</mat-option>
                    <mat-option value="mother">Mother</mat-option>
                    <mat-option value="sister">Sister</mat-option>
                    <mat-option value="brother">Brother</mat-option>
                    <mat-option value="guardian">Guardian</mat-option>
                  </mat-select>
                  <mat-error *ngIf="item.controls['etecRelation'].errors?.['required']">
                    Relation with Employee is <strong>required</strong></mat-error>
                </mat-form-field>
                <mat-form-field class="col-lg-5 col-md-5 input">
                  <mat-label>Phone Number</mat-label>
                  <input formControlName="etecContactNumber" (keypress)="onlyNumbersAllowed($event)" maxlength="11"
                    name="etecContactNumber" matInput placeholder="Phone Number">
                  <mat-error *ngIf="item.controls['etecContactNumber'].errors?.['required']">
                    Phone Number is <strong>required</strong></mat-error>
                  <mat-error *ngIf="item.controls['etecContactNumber'].errors?.['minlength']">
                    Enter a valid Phone number</mat-error>
                </mat-form-field>
                <mat-form-field class="col-lg-5 col-md-5 input">
                  <mat-label>Address</mat-label>
                  <textarea formControlName="etecAddress" name="etecAddress" matInput placeholder="Address"></textarea>
                  <mat-error *ngIf="item.controls['etecAddress'].errors?.['required']">
                    Address is <strong>required</strong></mat-error>
                </mat-form-field>
              </div>
            </div>
            <div class="row mt-3">
              <div class="col-md-offset-2 col-lg-5 col-md-4">
                <button id="emergencyBtn" type="button" class="btn btn-primary" [disabled]="isAddEmergencyDisabled()"
                  (click)="addEmergencyContact()">
                  Add Emergency Contact
                </button>
              </div>
              <div align="end" class=" col-lg-5 col-md-4">
                <button class="stepperBtn" [disabled]="isAddEmergencyDisabled()" mat-flat-button color="primary"
                  matStepperNext>Next</button>
              </div>
            </div>
          </div>


          <div class="container">
            <mat-step label="Academic Qualification">
              <div class="mt-5" formArrayName="emsTblAcademicQualification"
                *ngFor="let item of personalDetailsForm.get('emsTblAcademicQualification')['controls']; let i = index;">
                {{setCurrentIndexAcademicQualification(i)}}
                <div class="form-group" [formGroupName]=i>

                  <p class="mb-3"><b>Academic Qualification: {{i+1}}</b></p>
                  <div class="field col-12 md:col-6">
                    <div class="circle" *ngIf="imageUrl[i]">
                      <button (click)="DownloadFile(imageUrl[i])">Download Here</button>{{this.acadImageUrl[i]}}
                    </div>
                    <div class="circle" id="Input-btn">

                      <input id="file"
                        accept=".png,.jpeg,.jpg,.pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"
                        type="file" (change)="onFileChange($event,i)" />

                    </div>
                  </div>
                  <div class="col-lg-6 col-md-6 col-sm-6">
                    <mat-form-field style="display: none;" class="col-lg-5 col-md-5 input">
                      <mat-label>Academic Qualification Id</mat-label>
                      <input formControlName="etaqAqId" name="etaqAqId" matInput placeholder="Academic QualificationId">
                    </mat-form-field>
                  </div>
                  <div class="row">

                    <mat-form-field class="col-lg-5 col-md-5 input">
                      <mat-label>Degree Title</mat-label>
                      <mat-select formControlName="etaqQualification" name="etaqQualification">
                        <mat-option *ngFor="let deg of value1" [value]="deg">{{deg}} </mat-option>
                      </mat-select>
                      <mat-error *ngIf="item.controls['etaqQualification'].errors?.['required']">
                        Degree Title is <strong>required</strong></mat-error>
                    </mat-form-field>

                    <div class="col-3 off-set-2 mt-3">

                      <button id="addvalue" (click)="showField()" ng-init="addvalue= true" mat-raised-button
                        color="primary">Add Degree</button>

                    </div>
                  </div>
                  <div *ngIf="showAddNewDropDownField">
                    <mat-form-field class="col-lg-5 col-md-5 input" id="inputvalue" appearance="legacy">
                      <input matInput placeholder="Enter Degree here" ngModel [ngModelOptions]="{standalone: true}"
                        (keyup.enter)="pushValue($event.target,2)">
                    </mat-form-field>
                  </div>
                  <mat-form-field class="col-lg-5 col-md-5 input">
                    <mat-label>Passing Year</mat-label>
                    <input formControlName="etaqPassingYear" maxlength="4" (keypress)="onlyNumbersAllowed($event)"
                      matInput placeholder="Passing Year" name="etaqPassingYear">
                    <mat-error *ngIf="item.controls['etaqPassingYear'].errors?.['required']">
                      Passing Year is <strong>required</strong></mat-error>
                  </mat-form-field>
                  <div>
                    <mat-form-field class="col-lg-5 col-md-5 input">
                      <mat-label>Grade/CGPA</mat-label>
                      <input type="number" min="0" value="0" step=0.00392156863 formControlName="etaqCgpa" matInput
                        placeholder="Grade/ " name="etaqCgpa">
                      <mat-error *ngIf="item.controls['etaqCgpa'].errors?.['required']">
                        CGPA/Grade is <strong>required</strong></mat-error>
                    </mat-form-field>
                  </div>
                  <mat-form-field class="col-lg-5 col-md-5 input">
                    <mat-label>Institute Name</mat-label>
                    <input formControlName="etaqInstituteName" matInput placeholder="Institute Name"
                      name="etaqInstituteName">
                    <mat-error *ngIf="item.controls['etaqInstituteName'].errors?.['required']">
                      Institute Name is <strong>required</strong></mat-error>
                  </mat-form-field>
                </div>
              </div>
              <div class="row  mt-3">
                <div class="col-md-offset-2 col-lg-5 col-md-4">
                  <button type="button" class="btn btn-primary" [disabled]="isAcademicQualificationDisabled()"
                    (click)="addAcademicQualification()">
                    Add Academic Qualification
                  </button>
                </div>
                <div class=" col-lg-5 col-md-4">
                  <button class="stepperBtn " style="margin-right: 10px;" mat-flat-button color="primary"
                    matStepperPrevious>Back</button>
                  <button class="stepperBtn " [disabled]="isAcademicQualificationDisabled()" mat-flat-button
                    color="primary" matStepperNext>Next</button>
                </div>
              </div>
            </mat-step>
          </div>
        </mat-step>


        <mat-step label="Professional Details">
          <div class="form-group">
            <div formArrayName="emsTblEmployeeProfessionalDetails"
              *ngFor="let item of personalDetailsForm.get('emsTblEmployeeProfessionalDetails')['controls']; let i = index;">
              <div [formGroupName]="i">
                <mat-form-field style="display: none;" class="col-lg-5 col-md-5 input">
                  <mat-label>Professional Details Id</mat-label>
                  <input formControlName="etepdPdId" name="etepdPdId" matInput placeholder="Professional Details Id">
                </mat-form-field>
                <!-- <mat-label>Designation</mat-label>
                    <input matInput placeholder="Designation" formControlName="etepdDesignation"
                      name="etepdDesignation"> -->
                <div class="container">
                  <div class="row mt-3">

                    <mat-form-field class="col-lg-5 col-md-5 input">
                      <mat-label>Designation</mat-label>
                      <mat-select formControlName="etepdDesignation" name="etepdDesignation">
                        <mat-option *ngFor="let des of value" [value]="des">{{des}}
                        </mat-option>
                      </mat-select>
                      <mat-error *ngIf="item.controls['etepdDesignation'].errors?.['required']">
                        Designation is <strong>required</strong></mat-error>
                    </mat-form-field>

                    <div class="col-lg-6 col-md-6 input mt-3">

                      <button id="addvalue" (click)="showField()" ng-init="addvalue= true" mat-raised-button
                        color="primary">Add Designation</button>

                    </div>

                  </div>
                  <div *ngIf="showAddNewDropDownField">
                    <mat-form-field id="inputvalue" appearance="legacy" class="col-lg-5 col-md-5 input ">
                      <input matInput placeholder="Enter Designation here" ngModel [ngModelOptions]="{standalone: true}"
                        (keyup.enter)="pushValue($event.target,1)">
                    </mat-form-field>
                  </div>
                  <mat-form-field class="col-lg-5 col-md-5 input">
                    <mat-label>Salary</mat-label>
                    <input (keypress)="onlyNumbersAllowed($event)" formControlName="etepdSalary" name="etepdSalary"
                      matInput placeholder="Salary">
                    <mat-error *ngIf="item.controls['etepdSalary'].errors?.['required']">
                      Salary is <strong>required</strong></mat-error>
                  </mat-form-field>
                  <div>
                    <mat-form-field class="col-lg-5 col-md-5 input">
                      <mat-label>Joining Date</mat-label>
                      <input readonly matInput formControlName="etepdJoiningDate" name="etepdJoiningDate"
                        [matDatepicker]="picker" (dateChange)="getJoiningDate(i)">
                      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                      <mat-datepicker #picker></mat-datepicker>
                      <mat-error *ngIf="item.controls['etepdJoiningDate'].errors?.['required']">
                        Joining Date is <strong>required</strong></mat-error>
                    </mat-form-field>
                  </div>
                  <mat-form-field class="col-lg-5 col-md-5 input">
                    <mat-label>Probation Period</mat-label>
                    <input value="3" type="number" id="monthVal" matInput (keyup)="getJoiningDate(i)">
                  </mat-form-field>
                  <div>
                    <mat-form-field class="col-lg-5 col-md-5 input">
                      <mat-label>Probation</mat-label>
                      <input readonly id="probation" (keypress)="onlyNumbersAllowed($event)" [value]=probationDate
                        formControlName="etepdProbation" name="etepdProbation" matInput placeholder="Probation">
                      <mat-error *ngIf="item.controls['etepdProbation'].errors?.['required']">
                        Probation is <strong>required</strong></mat-error>
                    </mat-form-field>
                  </div>
                  <mat-form-field class="col-lg-5 col-md-5 input">
                    <mat-label>Manager ID</mat-label>
                    <input (keypress)="onlyNumbersAllowed($event)" formControlName="etedManagerId" name="etedManagerId"
                      matInput placeholder="Manager ID">
                  </mat-form-field>
                  <button mat-raised-button title="Assign Teamlead" color="primary" (click)="onCreate()"
                    style="margin-left: 25px;">Assign Teamlead</button>
                  <div class="mt-3">
                    <ng-container class=" mt-5 container">
                      <mat-form-field class="col-lg-5 col-md-5 input">
                        <mat-label>Employment Status</mat-label>
                        <mat-select formControlName="etepdEcsStatusId" name="etepdEcsStatusId"
                          (selectionChange)="permanentEmpstatus($event)">
                          <mat-option [value]="">---Select One---</mat-option>
                           <!-- <mat-option (onSelectionChange)="leaveassign()" id="leaveassign" ng-init="leaveassign=true" value="Active">Active</mat-option> -->
                           <mat-option value="1">Permanent</mat-option>
                          <mat-option value="2">Contract
                          </mat-option>
                          <mat-option value="3">Released
                          </mat-option>
                          <mat-option value="4">Resigned
                          </mat-option>
                          <mat-option value="5">Part-Time
                          </mat-option>
                          <mat-option value="6">Internship
                          </mat-option>
                        </mat-select>

                      </mat-form-field> 
                    </ng-container> 
                    <!-- <ng-container class=" mt-5 container">
                    <mat-form-field class="col-lg-5 col-md-5 input mt-3" >
                      <mat-label>Select Employee Status</mat-label>
                      <mat-select matInput formControlName="etedempStatus"  (selectionChange)="permanentEmpstatus($event)"
                        name="etedempStatus">
                        <mat-option [value]="">---Select One---</mat-option>
                        <mat-option *ngFor="let es of Empstatus" [value]="es.stId">{{es.stname}}
                        </mat-option>
                        <mat-error *ngIf="item.controls['etedempStatus'].errors?.['required']">
                          Field is <strong>required</strong></mat-error>
                      </mat-select>
                    </mat-form-field>
                  </ng-container> -->
                  </div>
                </div>
              </div>
              <div class="row mt-3">
                <div class=" col-lg-5 col-md-4" style="margin-left: 40vh;">
                  <button style="margin-left: 10px; float: right;" class="  stepperBtn "
                    [disabled]="isProfessionalDetailsDisabled() " mat-flat-button color="primary"
                    matStepperNext>Next</button>
                  <button class="stepperBtn " style="float: right;" mat-flat-button color="primary"
                    matStepperPrevious>Back</button>
                </div>
              </div>
            </div>
          </div>
        </mat-step>


        <div *ngIf="permanentEmp">
          <mat-step label="Permanent Employee">
            <div class="row">
              <div>
                <div formArrayName="emsTblPermanentEmployee"
                  *ngFor="let item of personalDetailsForm.get('emsTblPermanentEmployee')['controls']; let i = index;">
                  {{setCurrentIndexPermannetEmployee(i)}}
                  <div class="form-group mt-2" [formGroupName]=i>
                    <p class="mb-3"><b>Permanent Employee: {{i+1}}</b></p>

                    <div class="col-lg-6 col-md-6 col-sm-12" class="screenMaxWidth">
                      <mat-form-field class="col-lg-5 col-md-5 input">
                        <mat-label>Start Date</mat-label>
                        <input matInput formControlName="eesStartDate" name="eesStartDate" [matDatepicker]="picker"
                          (dateChange)="getPerDate(i)" (ngModelChange)="setDate($event)">
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                        <mat-error *ngIf="item.controls['eesStartDate'].errors?.['required']">
                          Joining Date is <strong>required</strong></mat-error>
                      </mat-form-field>
                      <mat-form-field class="col-lg-5 col-md-5 input">
                        <mat-label>Increment date</mat-label>
                        <input readonly formControlName="eesDateOfIncrement" name="eesDateOfIncrement" matInput
                          [matDatepicker]="startDate">
                        <mat-datepicker-toggle matSuffix [for]="startDate"></mat-datepicker-toggle>
                        <mat-datepicker #startDate></mat-datepicker>

                      </mat-form-field>

                      <mat-form-field class="col-lg-5 col-md-5 input">
                        <mat-label>Probation Period</mat-label>
                        <input value="12" type="number" id="monthVal1" matInput (keyup)="getPerDate(i)">

                      </mat-form-field>

                      <mat-form-field class="col-lg-5 col-md-5 input">
                        <mat-label>Increment</mat-label>
                        <input id="PerInc" (keypress)="onlyNumbersAllowed($event)" formControlName="eesIncrement"
                          name="eesIncrement" matInput placeholder="Increment">
                      </mat-form-field>

                      <mat-form-field class="col-lg-5 col-md-5 input">
                        <mat-label>Evaluation date</mat-label>
                        <input readonly id="Perprob" [value]=perprobDate1 formControlName="eesEvaluationDate"
                          name="eesEvaluationDate" matInput placeholder="Evaluation">
                      </mat-form-field>


                      <mat-form-field class=" col-lg-5 col-md-5 input">
                        <mat-label>Remarks</mat-label>
                        <textarea formControlName="eesRemarks" name="eesRemarks" matInput
                          placeholder="Remarks"></textarea>

                      </mat-form-field>

                      <mat-form-field class="col-lg-5 col-md-5 input">
                        <mat-label>Current Salary</mat-label>
                        <input id="PerInc" formControlName="eesSalary" name="eesSalary" matInput
                          placeholder="Current Salary">
                        <mat-error *ngIf="item.controls['eesSalary'].errors?.['required']">
                          Increment is <strong>required</strong></mat-error>
                      </mat-form-field>
                      <div class="row mt-3">
                        <div class="col-md-offset-2 col-lg-5 col-md-4">
                          <!-- <button type="button" class="btn btn-primary" [disabled]="isPermanentEmployeeDisabled()"
                            (click)="addPerEmp()">
                            Add Permanent Employee
                          </button> -->
                          <button align="end" class="setPositionRight4em" [disabled]="isPermanentEmployeeDisabled()"
                            mat-raised-button type="submit" color="primary" (click)="updateData()">Save</button>
                        </div>

                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </mat-step>
        </div>

        <div *ngIf="contractEmp">
          <mat-step label="Contract Employee">
            <div class="container">
              <div class="row">
                <div class="form-group">
                  <div formArrayName="emsTblContractEmployee"
                    *ngFor="let item of personalDetailsForm.get('emsTblContractEmployee')['controls']; let i = index;">
                    {{setCurrentIndexContractEmployee(i)}}
                    <div [formGroupName]="i">
                      <p class="mb-3 mt-3"><b>Contract Employee: {{i+1}}</b></p>
                      <div class="col-lg-6 col-md-6 col-sm-12" class="screenMaxWidth">
                        <mat-form-field class="col-lg-5 col-md-5 input">
                          <mat-label>Contract-Start Date</mat-label>
                          <input matInput formControlName="eesStartDate" name="eesStartDate" [matDatepicker]="picker"
                            (dateChange)="compareDatesGeneric(i,'emsTblContractEmployee','eesStartDate','eesEndDate','eesDuration')">
                          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                          <mat-datepicker #picker></mat-datepicker>
                          <mat-error *ngIf="item.controls['eesStartDate'].errors?.['required']">
                            Contract-Start Date is <strong>required</strong></mat-error>
                        </mat-form-field>
                        <mat-form-field class="col-lg-5 col-md-5 input">
                          <mat-label>Contract-End date</mat-label>
                          <input readonly formControlName="eesEndDate" name="eesEndDate" matInput
                            [matDatepicker]="startDate"
                            (dateChange)="compareDatesGeneric(i,'emsTblContractEmployee','eesStartDate','eesEndDate','eesDuration')">
                          <mat-datepicker-toggle matSuffix [for]="startDate"></mat-datepicker-toggle>
                          <mat-datepicker #startDate></mat-datepicker>
                          <mat-error *ngIf="item.controls['eesEndDate'].errors?.['required']">
                            Contract-End Date is <strong>required</strong></mat-error>
                        </mat-form-field>
                        <mat-form-field class="col-lg-5 col-md-5 input">
                          <mat-label>Contract Type</mat-label>
                          <mat-select formControlName="eesContractType" name="eesContractType">
                            <mat-option [value]="">-- select one --</mat-option>
                            <mat-option value="1">Per-Month</mat-option>
                            <mat-option value="2">Per-Project</mat-option>
                          </mat-select>
                        </mat-form-field>

                        <mat-form-field class="col-lg-5 col-md-5 input">
                          <mat-label>Contract Period</mat-label>
                          <input matInput formControlName="eesDuration" name="eesDuration">
                        </mat-form-field>

                        <mat-form-field class="col-lg-5 col-md-5 input">
                          <mat-label>Contract Amount</mat-label>
                          <input id="PerInc" (keypress)="onlyNumbersAllowed($event)" formControlName="eesSalary"
                            name="eesSalary" matInput>
                          <mat-error *ngIf="item.controls['eesSalary'].errors?.['required']">
                            Contract-Amount is <strong>required</strong></mat-error>
                        </mat-form-field>

                        <mat-form-field class=" col-lg-5 col-md-5 input">
                          <mat-label>Remarks</mat-label>
                          <textarea formControlName="eesRemarks" name="eesRemarks" matInput placeholder=""></textarea>
                        </mat-form-field>

                        <div class="row mt-3">
                          <div class="col-md-offset-2 col-lg-5 col-md-4">
                            <button type="button" class="btn btn-primary" [disabled]="isContractEmployeeDisabled()"
                              (click)="(addContractEmp())">
                              Renew Contract
                            </button>
                          </div>

                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </mat-step>
        </div>



        <div *ngIf="releasedEmp">
          <mat-step label="Released Employee">
            <div class="form-group">
              <div formArrayName="empreleaseddata"
                *ngFor="let item of personalDetailsForm.get('empreleaseddata')['controls']; let i = index;">
                <div [formGroupName]="i">
                  <div class="row">
                    <div>
                      <mat-form-field class="col-lg-5 col-md-5 input mt-3">
                        <mat-label>Start Date</mat-label>
                        <input matInput formControlName="eesStartDate"
                          (dateChange)="compareDatesGeneric(i,'empreleaseddata','eesStartDate','eesEndDate','eesDuration')"
                          name="eesStartDate" [matDatepicker]="picker">
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                        <mat-error *ngIf="item.controls['eesStartDate'].errors?.['required']">
                          Joining Date is <strong>required</strong></mat-error>
                      </mat-form-field>
                    </div>
                    <div>
                      <mat-form-field class="col-lg-5 col-md-5 input">
                        <mat-label>Released Date</mat-label>
                        <input readonly formControlName="eesEndDate" placeholder="Released Date"
                          (dateChange)="compareDatesGeneric(i,'empreleaseddata','eesStartDate','eesEndDate','eesDuration')"
                          name="eesEndDate" matInput [matDatepicker]="picker1" (dateChange)="releasedclearancedate(i)">
                        <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                        <mat-datepicker #picker1></mat-datepicker>
                      </mat-form-field>
                    </div>

                    <div>
                      <mat-form-field class="col-lg-5 col-md-5 input">
                        <mat-label>No. Of Service Days</mat-label>
                        <input readonly id="Perprob" [value]=perprobDate3 formControlName="eesDuration"
                          name="eesDuration" matInput placeholder="Service Days">
                      </mat-form-field>
                    </div>

                    <div>
                      <mat-form-field class="col-lg-5 col-md-5 input">
                        <mat-label>Clearance Date</mat-label>
                        <input id="daysvalue" [value]=perprobDate4 formControlName="eesClearenceDate"
                          name="eesClearenceDate" matInput placeholder="clearance Date">
                      </mat-form-field>
                    </div>
                    <div>
                      <mat-form-field class=" col-lg-5 col-md-5 input">
                        <mat-label>Remarks</mat-label>
                        <textarea formControlName="eesRemarks" name="eesRemarks" matInput
                          placeholder="Write Remarks Here.."></textarea>

                      </mat-form-field>
                    </div>
                    <!-- <div class="row mt-3">
                      <div class=" col-lg-5 col-md-4">
                        <button class="stepperBtnPer " style="margin-right: 10px;" mat-flat-button color="primary"
                          matStepperPrevious>Back</button>
                        <button class="stepperBtnPer " mat-flat-button color="primary"
                          (click)="addrelempdata();updateForm()" matStepperNext>Next</button>
                      </div>
                    </div> -->
                  </div>
                </div>
              </div>
            </div>
          </mat-step>
        </div>


        <div *ngIf="resignedEmp">
          <mat-step label="Resigned Employee">
            <div class="form-group mt-3">
              <div formArrayName="empresigneddata"
                *ngFor="let item of personalDetailsForm.get('empresigneddata')['controls']; let i = index;">
                <div [formGroupName]="i">
                  <div class="row">
                    <div>
                      <mat-form-field class="col-lg-5 col-md-5 input">
                        <mat-label>Date of Resigning</mat-label>
                        <input readonly matInput formControlName="eesStartDate"
                          (dateChange)="Resignednoticeperiod(i);resignclearancedate(i)" name="eesStartDate"
                          [matDatepicker]="picker">
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                        <mat-error *ngIf="item.controls['eesStartDate'].errors?.['required']">
                          Resigning Date is <strong>required</strong></mat-error>
                      </mat-form-field>
                    </div>
                    <div class="prob">
                      <mat-form-field class="col-lg-5 col-md-5 input">
                        <mat-label>Notice Period</mat-label>
                        <input value="1" type="number" id="noticeperiod" matInput placeholder="Notice Period"
                          (keyup)="Resignednoticeperiod(i)">

                      </mat-form-field>
                    </div>
                    <div>
                      <mat-form-field class="col-lg-5 col-md-5 input">
                        <mat-label>Releasing Date</mat-label>
                        <input id="probation" [value]=probationDate formControlName="eesReleasingDate"
                          name="eesReleasingDate" matInput placeholder="Releasing Date">
                      </mat-form-field>

                      <div>
                        <mat-form-field class="col-lg-5 col-md-5 input">
                          <mat-label>Clearance Date</mat-label>
                          <input readonly id="daysvalue" [value]=perprobDate2 formControlName="eesClearenceDate"
                            name="eesClearenceDate" matInput placeholder="clearance Date">

                        </mat-form-field>
                      </div>
                      <mat-form-field class=" col-lg-5 col-md-5 input">
                        <mat-label>Remarks</mat-label>
                        <textarea formControlName="eesRemarks" name="eesRemarks" matInput
                          placeholder="Write Remarks Here.."></textarea>

                      </mat-form-field>
                    </div>

                  </div>
                </div>
              </div>
            </div>
          </mat-step>
        </div>
        <div *ngIf="internshipEmp">
          <mat-step label="Internee">
            <div class="form-group">
              <div class="form-group mt-3">
                <div formArrayName="emsTblInterneedata"
                  *ngFor="let item of personalDetailsForm.get('emsTblInterneedata')['controls']; let i = index;">
                  <div [formGroupName]="i">
                    <div class="row">
                      <div>
                        <mat-form-field class="col-lg-5 col-md-5 input">
                          <mat-label>Start Date</mat-label>
                          <input matInput formControlName="eesStartDate" (dateChange)="getJoiningDate3(i)"
                            name="eesStartDate" [matDatepicker]="picker">
                          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                          <mat-datepicker #picker></mat-datepicker>
                          <mat-error *ngIf="item.controls['eesStartDate'].errors?.['required']">
                            Start Date is <strong>required</strong></mat-error>
                        </mat-form-field>
                      </div>
                      <div class="prob">
                        <mat-form-field class="col-lg-5 col-md-5 input">
                          <mat-label>Internship Period</mat-label>
                          <input value="3" type="number" id="Internval" matInput placeholder="Internship Period"
                            (keyup)="getJoiningDate3(i)">

                        </mat-form-field>
                      </div>
                      <div>
                        <mat-form-field class="col-lg-5 col-md-5 input">
                          <mat-label>Internship End Date</mat-label>
                          <input id="probation" [value]=probationDate formControlName="eesClearanceDate"
                            name="eesClearanceDate" matInput placeholder="Internship End Date">
                        </mat-form-field>
                      </div>
                      <div>
                        <mat-form-field class="col-lg-5 col-md-5 input">
                          <mat-label>Stipend</mat-label>
                          <input id="daysvalue" (keypress)="onlyNumbersAllowed($event)" formControlName="eesSalary"
                            name="eesSalary" matInput placeholder="Enter Stipend here!">

                        </mat-form-field>
                      </div>
                      <div>
                        <mat-form-field class=" col-lg-5 col-md-5 input">
                          <mat-label>Remarks</mat-label>
                          <textarea formControlName="eesRemarks" name="eesRemarks" matInput
                            placeholder="Remarks"></textarea>

                        </mat-form-field>
                      </div>




                    </div>
                  </div>
                </div>
              </div>
            </div>
          </mat-step>
        </div>

        <div *ngIf="parttimeEmp">
          <mat-step label="Part-Time Employee">
            <div class="row">
              <div class="form-group">
                <div formArrayName="emsTblPartTimeEmployee"
                  *ngFor="let item of personalDetailsForm.get('emsTblPartTimeEmployee')['controls']; let i = index;">
                  <div [formGroupName]="i">
                    <div class="row">
                      <div class="col-lg-5 col-md-5 col-sm-12">
                        <mat-form-field class="col-lg-5 col-md-5 input" style="width: 300px;">
                          <mat-label>Part-Time Status</mat-label>
                          <mat-select formControlName="eesetedpartTimetype" name="eesetedpartTimetype">
                            <mat-option [value]="">-- select one --</mat-option>
                            <mat-option value="1">Daily</mat-option>
                            <mat-option value="2">Weekly</mat-option>
                            <mat-option value="3">Bi-Weekly</mat-option>
                            <mat-option value="4">Monthly</mat-option>
                          </mat-select>
                        </mat-form-field>
                        <section class="example-section">
                          <mat-checkbox class="example-margin" id="monday" formControlName="monday">Monday
                          </mat-checkbox>
                          <mat-checkbox class="example-margin" id="tuesday" formControlName="tuesday">Tuesday
                          </mat-checkbox>
                          <mat-checkbox class="example-margin" id="wednesday" formControlName="wednesday">Wednesday
                          </mat-checkbox>
                          <mat-checkbox class="example-margin" id="thrusday" formControlName="thrusday">Thrusday
                          </mat-checkbox>
                          <mat-checkbox class="example-margin" id="friday" formControlName="friday">Friday
                          </mat-checkbox>
                        </section>


                        <input  class="hidden" formControlName="eesDays"
                        name="eesDays" matInput placeholder="Enter Stipend here!">

                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </mat-step>
        </div>

        <mat-step label="Professional Qualification">
          <div formArrayName="emsTblProfessionalQualification"
            *ngFor="let item of personalDetailsForm.get('emsTblProfessionalQualification')['controls']; let i = index;">
            {{setCurrentIndexProfessionalQualification(i)}}
            <div class="form-group" [formGroupName]=i>
              <p class="mb-3"><b>Professional Qualification: {{i+1}}</b></p>
              <div class="field col-12 md:col-6">
                <div class="circle" *ngIf="profQualificationUrl[i]">
                  <button (click)="DownloadFile(profQualificationUrl[i])">Download
                    Here</button>{{profQualificationName[i]}}

                </div>
                <div id="Input-btn">
                  <input id="file" type="file"
                    accept=".png,.jpeg,.jpg,.pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"
                    (change)="professionalQualificationUpload($event,i)" />
                  <span>(Only Pdf,Docx,jpg)</span>
                </div>
              </div>
              <mat-form-field style="display: none;" class="col-lg-5 col-md-5 input">
                <mat-label>Profesiional Qualification Id</mat-label>
                <input formControlName="etpqPqId" name="etpqPqId" matInput placeholder="Professional QualificationId">
              </mat-form-field>
              <mat-form-field class="col-lg-5 col-md-5input">
                <mat-label>Certification</mat-label>
                <input formControlName="etpqCertification" matInput placeholder="Certification"
                  name="etpqCertification">
                <mat-error *ngIf="item.controls['etpqCertification'].errors?.['required']">
                  Certification is <strong>required</strong></mat-error>
              </mat-form-field>
              <mat-form-field class="col-lg-5 col-md-5 input">
                <mat-label>Start date</mat-label>
                <input readonly formControlName="etpqStratDate" name="etpqStratDate" matInput
                  [matDatepicker]="startDate">
                <mat-datepicker-toggle matSuffix [for]="startDate"></mat-datepicker-toggle>
                <mat-datepicker #startDate></mat-datepicker>
                <mat-error *ngIf="item.controls['etpqStratDate'].errors?.['required']">
                  Start Date is <strong>required</strong></mat-error>
              </mat-form-field>
              <mat-form-field class="col-lg-5 col-md-5 input">
                <mat-label>End date</mat-label>
                <input readonly formControlName="etpqEndDate" name="etpqEndDate" matInput [matDatepicker]="endDate">
                <mat-datepicker-toggle matSuffix [for]="endDate"></mat-datepicker-toggle>
                <mat-datepicker #endDate></mat-datepicker>
                <mat-error *ngIf="item.controls['etpqEndDate'].errors?.['required']">
                  End Date is <strong>required</strong></mat-error>
              </mat-form-field>
              <mat-form-field class="col-lg-5 col-md-5 input">
                <mat-label>Institute Name</mat-label>
                <input formControlName="etpqInstituteName" matInput placeholder="Institute Name"
                  name="etpqInstituteName">
                <mat-error *ngIf="item.controls['etpqInstituteName'].errors?.['required']">
                  Institute Name is <strong>required</strong></mat-error>
              </mat-form-field>
            </div>
          </div>
          <div class="row mt-3">
            <div class="col-md-offset-2 col-lg-5 col-md-4">
              <button type="button" class="btn btn-primary" [disabled]="isProfessionalQualificationDisabled()"
                (click)="addProfessionalQualification()">
                Add Professional Qualification
              </button>
            </div>
            <div class=" col-lg-5 col-md-4">
              <button class="stepperBtn " style="margin-right: 10px;" mat-flat-button color="primary"
                matStepperPrevious>Back</button>
              <button class="stepperBtn " mat-flat-button color="primary"
                [disabled]="isProfessionalQualificationDisabled()" matStepperNext>Next</button>
            </div>
          </div>
        </mat-step>

        <mat-step label="Working History">
          <div formArrayName="emsTblWorkingHistory"
            *ngFor="let item of personalDetailsForm.get('emsTblWorkingHistory')['controls']; let i = index;">
            {{setCurrentIndexWorkingHistory(i)}}
            <div class="form-group" [formGroupName]=i>
              <p class="mb-3"><b>Working History: {{i+1}}</b></p>
              <mat-form-field class="col-lg-5 col-md-5 input">
                <div></div>
                <mat-label>Company Name</mat-label>
                <input formControlName="etwhCompanyName" matInput name="etwhCompanyName" placeholder="Company Name">
                <mat-error *ngIf="item.controls['etwhCompanyName'].errors?.['required']">
                  Company Name is <strong>required</strong></mat-error>
              </mat-form-field>
              <mat-form-field class="col-lg-5 col-md-5 input">
                <mat-label>Designation</mat-label>
                <input formControlName="etwhDesignation" type="text" matInput name="etwhDesignation"
                  placeholder="Designation">

                <mat-error *ngIf="item.controls['etwhDesignation'].errors?.['required']">
                  Designation is <strong>required</strong></mat-error>
              </mat-form-field>
              <mat-form-field class="col-lg-5 col-md-5 input">
                <mat-label>Start date</mat-label>
                <input readonly formControlName="etwhStratDate"
                  (dateChange)="compareDatesGeneric(i,'emsTblWorkingHistory','etwhStratDate','etwhEndDate','etwhDuration')"
                  matInput [matDatepicker]="prevstartDate">
                <mat-datepicker-toggle matSuffix [for]="prevstartDate"></mat-datepicker-toggle>
                <mat-datepicker #prevstartDate></mat-datepicker>
                <mat-error *ngIf="item.controls['etwhStratDate'].errors?.['required']">
                  Start Date is <strong>required</strong></mat-error>
              </mat-form-field>
              <mat-form-field class="col-lg-5 col-md-5input">
                <mat-label>End date</mat-label>
                <input readonly formControlName="etwhEndDate"
                  (dateChange)="compareDatesGeneric(i,'emsTblWorkingHistory','etwhStratDate','etwhEndDate','etwhDuration')"
                  name="etwhEndDate" matInput [matDatepicker]="prevendDate">
                <mat-datepicker-toggle matSuffix [for]="prevendDate"></mat-datepicker-toggle>
                <mat-datepicker #prevendDate></mat-datepicker>
                <mat-error *ngIf="item.controls['etwhEndDate'].errors?.['required']">
                  End Date is <strong>required</strong></mat-error>
              </mat-form-field>
              <mat-form-field class="col-lg-5 col-md-5 input">
                <mat-label>Duration</mat-label>
                <input readonly [value]="whDuration" ng-click="dayDiff(firstDate,secondDate)"
                  formControlName="etwhDuration" type="text" matInput name="etwhDuration" placeholder="Duration">
                <mat-error *ngIf="item.controls['etwhDuration'].errors?.['required']">
                  Duration is <strong>required</strong></mat-error>
              </mat-form-field>
            </div>
            <div class="circle" *ngIf="workingHistoryUrl[i]">
              <button (click)="DownloadFile(workingHistoryUrl[i])">Download Here</button>{{this.workingHistoryName[i]}}
            </div>
            <div id="Input-btn">
              <input id="file" type="file"
                accept=".png,.jpeg,.jpg,.pdf,.doc,.docx,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"
                (change)="workingHistoryUpload($event,i)" />
            </div>
          </div>
          <div class="row  mt-3">
            <div class="col-md-offset-2 col-lg-5 col-md-4">
              <button type="button" class="btn btn-primary" [disabled]="isWokringHistoryDisabled()"
                (click)="addWorkingHistory()">
                Add Work History
              </button>
            </div>
            <div class=" col-lg-5 col-md-4">
              <button class="stepperBtn " style="margin-right: 10px;" mat-flat-button color="primary"
                matStepperPrevious>Back</button>
            </div>
          </div>
        </mat-step>

        <mat-step label="Asset">
          <div class="form-group" formArrayName="imsAssign">

            <div class="row  mt-3">
              <div class="col-md-offset-2 col-lg-5 col-md-4">
                <button type="button" class="btn btn-primary" (click)="onCreateAssign()">
                  Assign Asset
                </button>
              </div>

              <table mat-table [dataSource]="assetdata" class="mat-elevation-z8 mt-3" matSort>
                <ng-container matColumnDef="assetid">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Asset ID</th>
                  <td mat-cell *matCellDef="let asset"> {{asset.itasItaAssetId}} </td>
                </ng-container>
                <ng-container matColumnDef="nameModel">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Name/Model </th>
                  <td mat-cell *matCellDef="let asset">{{asset.assetName}} </td>
                </ng-container>
                <ng-container matColumnDef="quantity">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Assigned Quantity</th>
                  <td mat-cell *matCellDef="let asset"> {{asset.itasQuantity}} </td>
                </ng-container>
                <ng-container matColumnDef="category">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Category</th>
                  <td mat-cell *matCellDef="let asset"> {{asset.assetCatagoryName}} </td>
                </ng-container>
                <ng-container matColumnDef="actions">
                  <th mat-header-cell *matHeaderCellDef>Actions </th>
                  <td mat-cell *matCellDef="let asset">


                  </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns1"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns1;"></tr>
                <!-- <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="onRowClicked(row)"></tr> -->
              </table>

            </div>
          </div>
        </mat-step>





        <!-- <div *ngIf="assignleavestep">
          <mat-step label="Assign Leave">
            <div class="mt-3">
              <mat-form-field color="primary" appearance="legacy" style="width:250px">
                <mat-label>Select Date </mat-label>
                <input matInput [matDatepicker]="picker2">
                <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                <mat-datepicker #picker2 color="primary"></mat-datepicker>
              </mat-form-field>
            </div>
          </mat-step>
        </div> -->
      </form>
    </mat-vertical-stepper>
    <div class="text-align-right">
      <button routerLink="./employee" mat-raised-button color="warn">Cancel</button>
      <button style="margin-left: 10px;" [disabled]="isProfessionalDetailsDisabled()" (click)="updateData()"
        mat-raised-button type="submit" color="primary">Save</button>
    </div>
  </div>
</div>
